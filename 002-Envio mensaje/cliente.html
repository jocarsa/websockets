<!doctype html>
<html>
    <head>
    </head>
    <body>
        <button>Conectar</button>
        <script>
            let socket = new WebSocket("wss://jotauve.es:3000");
            
            /////////////////////////////// ABRO CONEXION DE SOCKET //////////////////////////////
        
            socket.addEventListener("open", (event) => {                // Cuando alguien me abre una conexion
              console.log("WebSocket connection opened");               // Se ha abierto una conexion
            });

            socket.addEventListener("error", (event) => {               // en el caso de que haya un error
              console.error("WebSocket error:", event);                 // intenta decirme donde esta el error
            });

            //////////////////////////////// ABRO CONEXION DE SOCKET //////////////////////////////
            
            document.querySelector("button").onclick = function(){
                console.log("ok")
                socket.send(JSON.stringify({"mensaje":"hola"}))
            }
            
            socket.addEventListener("message", (event) => {             // Cuando el servidor envÃ­e un mensjae              
              let  datos = event.data                       // Datos es lo que me envie el servidor, pero pasalo a json
              console.log(datos)
            });
            
            
        </script>
    </body>
</html>